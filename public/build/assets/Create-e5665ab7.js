import{l as E,T as A,D as B,y as I,m as k,f as n,a as l,w as V,o as m,b as d,t as _,u as o,g as c,d as w,n as U,e as D}from"./app-fc6cbe82.js";import{_ as p}from"./InputError-5608eb67.js";import{_ as f,a as v}from"./TextInput-2923ad7e.js";import{_ as $,a as z}from"./SecondaryButton-f81a2274.js";import{_ as F}from"./PrimaryButton-b2522f86.js";import{C as u}from"./vue-select-0e873f7a.js";import{T as G,a as M}from"./global-2e02be81.js";/* empty css             */const q={class:"space-y-6"},P=["onSubmit"],X={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},J={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 gap-6"},H={key:0,id:"opcinesActividadO",class:"xl:col-span-2 col-span-1"},K=d("label",{name:""}," Reportar en nombre de: ",-1),L={id:"opcinesActividadO",class:"xl:col-span-2 col-span-1"},Q=d("label",{name:""}," Tipo de reporte ",-1),W={class:"xl:col-span-1 col-span-1"},Y={class:"col-span-1"},Z={key:1,id:"Sordentrabajo",class:"xl:col-span-2 col-span-1"},ee=d("label",{name:"ordentrabajo_ids"}," Orden de trabajo ",-1),oe={key:2,class:"w-full lg:col-span-2 col-span-1"},ae={key:3,class:"w-full col-span-1"},ie={id:"Scentrotrabajo",class:"col-span-1"},te=d("label",{name:"centrotrabajo_id"}," Centro de trabajo ",-1),le={key:4,class:"col-span-1"},se={key:5,id:"actividad",class:"xl:col-span-2 col-span-1"},de=d("label",{name:"actividad_id"}," Actividad ",-1),re={key:6,id:"reproceso",class:"xl:col-span-2 col-span-1"},ne=d("label",{name:"reproceso_id"}," Reproceso",-1),me={key:7,id:"disponibilidad",class:"xl:col-span-3 col-span-1"},ce=d("label",{name:"disponibilidad_id"}," Disponibilidad",-1),pe={class:"mb-8 mt-[230px] flex justify-end"},ue={key:0,class:"mx-12 px-8 text-lg font-medium text-red-600 bg-red-50 dark:text-gray-100"},_e={key:1,class:"mx-12 px-8 text-lg font-medium text-gray-800 dark:text-gray-100"},Oe={__name:"Create",props:{show:Boolean,title:String,roles:Object,losSelect:Object,numberPermissions:Number,valuesGoogleCabeza:Object,valuesGoogleBody:Object,Trabajadores:Object},emits:["close"],setup(R,{emit:j}){const r=R,s=E({params:{pregunta:""},actividad_id:r.losSelect.actividad,centrotrabajo_id:r.losSelect.centrotrabajo,disponibilidad_id:r.losSelect.disponibilidad,ordentrabajo_id:r.losSelect.ordentrabajo,reproceso_id:r.losSelect.reproceso,temp_disponibilidad_id:null,temp_reproceso_id:null,temp_actividad_id:null,valorInactivo:"NA",cabeza:r.valuesGoogleCabeza,nombresOT:Object.values(r.valuesGoogleBody),ordentrabajo_ids:[],mensajeFalta:"",BanderaTipo:!0,mensajeTiemposAuto:""}),e=A({...Object.fromEntries(["tipoReporte","fecha","hora_inicial","hora_final","actividad_id","centrotrabajo_id","disponibilidad_id","operario_id","ordentrabajo_id","reproceso_id","ordentrabajo_ids","otitem","user_id","nombreTablero","OTItem","TiempoEstimado"].map(i=>[i,""]))});B(()=>{r.numberPermissions>8});const O=["Tiempo_estimado_Ing_elec","Tiempo_estimado_Ing_mec","Tiempo_estimado_cableado","Tiempo_estimado_cobre","Tiempo_estimado_corte","Tiempo_estimado_doblez","Tiempo_estimado_ensamble","Tiempo_estimado_pulida","Tiempo_estimado_soldadura"];let g=!0;function C(){let i=0;for(e.centrotrabajo_id,e.centrotrabajo_id=s.centrotrabajo_id[1];s.nombresOT[e.ordentrabajo_ids.value][O[i]]===""&&i<10;)i++;if(e.TiempoEstimado=s.nombresOT[e.ordentrabajo_ids.value][O[i]],i!==9){let a;i==4&&(a=1),i==5&&(a=2),i==8&&(a=3),i==7&&(a=4),i==6&&(a=5),i==3&&(a=6),i==2&&(a=7),i==0&&(a=8),i==1&&(a=9),e.centrotrabajo_id=s.centrotrabajo_id[a]}else s.mensajeTiemposAuto="Tiempos vacios!";g=!1}I(()=>{if(r.show){s.BanderaTipo&&(e.tipoReporte={title:"Actividad",value:0},s.BanderaTipo=!1),e.errors={};let i=new Date;(e.fecha===null||e.fecha==="")&&(e.fecha=G(i).substring(0,10),e.hora_inicial=M()),s.ordentrabajo_ids=s.nombresOT.map((a,t)=>{var b;return{title:(b=a.Item)==null?void 0:b.replace(/_/g," "),value:t}}),e.ordentrabajo_ids&&e.ordentrabajo_ids.value!=null&&(e.nombreTablero=s.nombresOT[e.ordentrabajo_ids.value][y[0]],e.OTItem=s.nombresOT[e.ordentrabajo_ids.value].Item,g&&C())}else s.BanderaTipo=!0});let T=i=>{let a="";try{i.forEach((t,b)=>{if(typeof e[t]>"u"||e[t]===null||e[t].length===0)throw a=t,console.log("ðŸ§ˆ debu value:",t),new Error("BreakException")})}catch{}return a},N=()=>{let i=e.tipoReporte.value,a=!0;const t=" es obligatorio";i==0&&(a=T(["ordentrabajo_ids","centrotrabajo_id","actividad_id"])),i==1&&(a=T(["centrotrabajo_id","ordentrabajo_ids","actividad_id","reproceso_id"])),i==2&&(a=T(["centrotrabajo_id","disponibilidad_id"]));let b={ordentrabajo_ids:"Orden trabajo",actividad_id:"Actividad",reproceso_id:"Reproceso",centrotrabajo_id:"Centro de trabajo",disponibilidad_id:"Disponibilidad"};return a!=""?b[a]+t:a};const x=()=>{e.nombreTablero,e.OTItem,console.log("ðŸ§ˆ debu form.OTItem:",e.OTItem),e.TiempoEstimado,e.ordentrabajo_id=e.ordentrabajo_ids,s.mensajeFalta=N(),s.mensajeFalta==""&&e.post(route("reporte.store"),{preserveScroll:!0,onSuccess:()=>{j("close"),e.reset()},onError:()=>alert(JSON.stringify(e.errors,null,4)),onFinish:()=>null})};k(()=>e.tipoReporte,i=>{e.actividad_id=null,e.centrotrabajo_id=null,e.disponibilidad_id=null,e.operario_id=null,e.ordentrabajo_id=null,e.reproceso_id=null,e.ordentrabajo_ids=null}),k(()=>e.ordentrabajo_ids,i=>{g=!0});const S=[{title:"Actividad",value:0},{title:"Reproceso",value:1},{title:"Disponibilidad(paro)",value:2}],h=["Nombre Tablero","OT+Item","% avance","Tiempo estimado"],y=["Nombre_tablero","avance"];return(i,a)=>(m(),n("section",q,[l($,{show:r.show,onClose:a[11]||(a[11]=t=>j("close"))},{default:V(()=>[d("form",{class:"px-6 my-8",onSubmit:D(x,["prevent"])},[d("h2",X,_(i.lang().label.add)+" "+_(r.title),1),d("div",J,[r.numberPermissions>8?(m(),n("div",H,[K,l(o(u),{options:r.Trabajadores,label:"title",modelValue:o(e).user_id,"onUpdate:modelValue":a[0]||(a[0]=t=>o(e).user_id=t)},null,8,["options","modelValue"])])):c("",!0),d("div",L,[Q,l(o(u),{options:S,label:"title",modelValue:o(e).tipoReporte,"onUpdate:modelValue":a[1]||(a[1]=t=>o(e).tipoReporte=t)},null,8,["modelValue"])]),d("div",W,[l(f,{for:"fecha",value:i.lang().label.fecha},null,8,["value"]),l(v,{id:"fecha",type:"date",class:"mt-1 block w-full bg-gray-200",modelValue:o(e).fecha,"onUpdate:modelValue":a[2]||(a[2]=t=>o(e).fecha=t),disabled:"",placeholder:"fecha",error:o(e).errors.fecha},null,8,["modelValue","error"]),l(p,{class:"mt-2",message:o(e).errors.fecha},null,8,["message"])]),d("div",Y,[l(f,{for:"hora_inicial",value:i.lang().label["hora inicial"]},null,8,["value"]),l(v,{id:"hora_inicial",type:"time",class:"mt-1 block w-full bg-gray-200",modelValue:o(e).hora_inicial,"onUpdate:modelValue":a[3]||(a[3]=t=>o(e).hora_inicial=t),disabled:"",placeholder:"hora_inicial",error:o(e).errors.hora_inicial,step:"3600"},null,8,["modelValue","error"]),l(p,{class:"mt-2",message:o(e).errors.hora_inicial},null,8,["message"])]),o(e).tipoReporte.value!=2?(m(),n("div",Z,[ee,l(o(u),{options:s.ordentrabajo_ids,label:"title",modelValue:o(e).ordentrabajo_ids,"onUpdate:modelValue":a[4]||(a[4]=t=>o(e).ordentrabajo_ids=t)},null,8,["options","modelValue"]),l(p,{class:"mt-2",message:o(e).errors.ordentrabajo_id},null,8,["message"])])):c("",!0),o(e).ordentrabajo_ids&&o(e).tipoReporte.value!=2?(m(),n("div",oe,[l(f,{for:i.index,value:h[0]},null,8,["for","value"]),l(v,{id:i.index,type:"text",disabled:"",class:"mt-1 block w-full bg-gray-200",value:s.nombresOT[o(e).ordentrabajo_ids.value][y[0]]},null,8,["id","value"])])):c("",!0),o(e).ordentrabajo_ids&&o(e).tipoReporte.value!=2?(m(),n("div",ae,[l(f,{for:i.index,value:h[1]},null,8,["for","value"]),l(v,{id:i.index,type:"text",disabled:"",class:"mt-1 block w-full bg-gray-200",value:s.nombresOT[o(e).ordentrabajo_ids.value][y[1]]},null,8,["id","value"])])):c("",!0),d("div",ie,[te,l(o(u),{options:s.centrotrabajo_id,label:"title",modelValue:o(e).centrotrabajo_id,"onUpdate:modelValue":a[5]||(a[5]=t=>o(e).centrotrabajo_id=t)},null,8,["options","modelValue"]),l(p,{class:"mt-2",message:o(e).errors.centrotrabajo_id},null,8,["message"])]),o(e).ordentrabajo_ids&&o(e).centrotrabajo_id&&o(e).tipoReporte.value!=2?(m(),n("div",le,[l(f,{for:i.index,value:h[3]},null,8,["for","value"]),l(v,{id:i.index,type:"text",disabled:"",class:"mt-1 block w-full bg-gray-200",modelValue:o(e).TiempoEstimado,"onUpdate:modelValue":a[6]||(a[6]=t=>o(e).TiempoEstimado=t)},null,8,["id","modelValue"])])):c("",!0),o(e).tipoReporte.value==0||o(e).tipoReporte.value==1?(m(),n("div",se,[de,l(o(u),{options:s.actividad_id,label:"title",required:"",modelValue:o(e).actividad_id,"onUpdate:modelValue":a[7]||(a[7]=t=>o(e).actividad_id=t)},null,8,["options","modelValue"]),l(p,{class:"mt-2",message:o(e).errors.actividad_id},null,8,["message"])])):c("",!0),o(e).tipoReporte.value==1?(m(),n("div",re,[ne,l(o(u),{options:s.reproceso_id,label:"title",required:"",modelValue:o(e).reproceso_id,"onUpdate:modelValue":a[8]||(a[8]=t=>o(e).reproceso_id=t)},null,8,["options","modelValue"]),l(p,{class:"mt-2",message:o(e).errors.reproceso_id},null,8,["message"])])):c("",!0),o(e).tipoReporte.value==2?(m(),n("div",me,[ce,l(o(u),{options:s.disponibilidad_id,label:"title",required:"",modelValue:o(e).disponibilidad_id,"onUpdate:modelValue":a[9]||(a[9]=t=>o(e).disponibilidad_id=t)},null,8,["options","modelValue"]),l(p,{class:"mt-2",message:o(e).errors.disponibilidad_id},null,8,["message"])])):c("",!0)]),d("div",pe,[s.mensajeFalta!=""?(m(),n("h2",ue,_(s.mensajeFalta),1)):c("",!0),s.mensajeTiemposAuto!=""?(m(),n("h2",_e,_(s.mensajeTiemposAuto),1)):c("",!0),l(z,{disabled:o(e).processing,onClick:a[10]||(a[10]=t=>j("close"))},{default:V(()=>[w(_(i.lang().button.close),1)]),_:1},8,["disabled"]),l(F,{class:U(["ml-3",{"opacity-25":o(e).processing}]),disabled:o(e).processing,onClick:x},{default:V(()=>[w(_(o(e).processing?i.lang().button.add+"...":i.lang().button.add),1)]),_:1},8,["class","disabled"])])],40,P)]),_:1},8,["show"])]))}};export{Oe as default};
