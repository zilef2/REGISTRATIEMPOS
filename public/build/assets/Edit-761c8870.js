import{l as D,T as G,y as q,f as n,a as d,w as V,o as c,b as r,t as v,u as a,g as p,d as U,n as L,e as M}from"./app-fc6cbe82.js";import{_}from"./InputError-5608eb67.js";import{_ as g,a as f}from"./TextInput-2923ad7e.js";import{_ as P,a as H}from"./SecondaryButton-f81a2274.js";import{_ as J}from"./PrimaryButton-b2522f86.js";import{C as u}from"./vue-select-0e873f7a.js";import"./vue-datepicker-603ea02c.js";import{L as j}from"./global-2e02be81.js";const K={class:"space-y-6"},Q={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},W={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6"},X={key:0,id:"opcinesActividadO",class:"xl:col-span-2"},Y=r("label",{name:""}," Reportar en nombre de: ",-1),Z={id:"opcinesActividadO",class:"xl:col-span-2"},ee=r("label",{name:""}," Tipo de reporte ",-1),ae={class:"xl:col-span-1"},oe={class:""},ie={key:1,id:"Sordentrabajo",class:"xl:col-span-2"},le=r("label",{name:"ordentrabajo_ids"}," Orden de trabajo ",-1),te={key:2,class:"w-full col-span-2"},de={key:3,class:"w-full col-span-1"},se={id:"Scentrotrabajo"},re=r("label",{name:"centrotrabajo_id"}," Centro de trabajo ",-1),ne={key:4},ce={key:5,id:"actividad",class:"col-span-2"},pe=r("label",{name:"actividad_id"}," Actividad ",-1),_e={key:6,id:"reproceso",class:"col-span-2"},ue=r("label",{name:"reproceso_id"}," Reproceso",-1),me={key:7,id:"disponibilidad",class:"col-span-3"},be=r("label",{name:"disponibilidad_id"}," Disponibilidad",-1),ve={class:"mb-8 mt-[290px] flex justify-end"},ge={key:0,class:"mx-12 px-8 text-lg font-medium text-red-700 bg-red-50 dark:text-gray-100"},Ce={__name:"Edit",props:{show:Boolean,title:String,generica:Object,losSelect:Object,numberPermissions:Number,valuesGoogleCabeza:Object,valuesGoogleBody:Object,Trabajadores:Object},emits:["close"],setup($,{emit:h}){const i=$,l=D({actualizarCadaReporte:!0,justNames:["fecha","hora_inicial","actividad_id","centrotrabajo_id","disponibilidad_id","operario_id","ordentrabajo_id","reproceso_id"],tipoReporte:{title:"Actividad",value:0},valorInactivo:"NA",cabeza:i.valuesGoogleCabeza,nombresOT:Object.values(i.valuesGoogleBody),actividad_id:i.losSelect.actividad,centrotrabajo_id:i.losSelect.centrotrabajo,disponibilidad_id:i.losSelect.disponibilidad,ordentrabajo_id:i.losSelect.ordentrabajo,reproceso_id:i.losSelect.reproceso,ordentrabajo_ids:[],mensajeFalta:""}),e=G({...Object.fromEntries(l.justNames.map(o=>[o,""]))}),T=[{title:"Actividad",value:0},{title:"Reproceso",value:1},{title:"Disponibilidad(paro)",value:2}];q(()=>{var o,t,m,b,s,k,C,S,O,w,x,z,N;i.show?(e.errors={},l.actualizarCadaReporte&&(e.tipoReporte=T[(o=i.generica)==null?void 0:o.tipoReporte],l.tipoReporte=e.tipoReporte,l.ordentrabajo_ids=l.nombresOT.map((I,F)=>{var A;return{title:(A=I.Item)==null?void 0:A.replace(/_/g," "),value:F}}),e.ordentrabajo_id=l.ordentrabajo_ids[(t=i.generica)==null?void 0:t.ordentrabajo_id].title,console.log("ðŸ§ˆ debu data:",l.ordentrabajo_ids[0]),e.centrotrabajo_id=l.centrotrabajo_id[(m=i.generica)==null?void 0:m.centrotrabajo_id].title,e.actividad_id=(b=i.generica)==null?void 0:b.actividad_s,e.cantidad=(s=i.generica)==null?void 0:s.cantidad,e.fecha=(k=i.generica)==null?void 0:k.fecha,e.hora_inicial=(C=i.generica)==null?void 0:C.hora_inicial,e.disponibilidad_id=(S=i.generica)==null?void 0:S.disponibilidad_s,e.material_id=(O=i.generica)==null?void 0:O.material_s,e.operario_id=(w=i.generica)==null?void 0:w.operario_s,e.calendario_id=(x=i.generica)==null?void 0:x.calendario_s,e.pieza_id=(z=i.generica)==null?void 0:z.pieza_s,e.reproceso_id=(N=i.generica)==null?void 0:N.reproceso_s,l.actualizarCadaReporte=!1)):l.actualizarCadaReporte=!0});const B=()=>{var t;let o=j(i.losSelect.actividad,e.actividad_id);e.actividad_id=o!=""?o:"",o=j(i.losSelect.centrotrabajo,e.centrotrabajo_id),e.centrotrabajo_id=o!=""?o:"",o=j(i.losSelect.disponibilidad,e.disponibilidad_id),e.disponibilidad_id=o!=""?o:"",o=j(l.ordentrabajo_ids,e.ordentrabajo_id),e.ordentrabajo_id=o!=""?o:"",o=j(i.losSelect.reproceso,e.reproceso_id),e.reproceso_id=o!=""?o:"",e.put(route("reporte.update",(t=i.generica)==null?void 0:t.id),{preserveScroll:!0,onSuccess:()=>{h("close"),e.reset()},onError:()=>null,onFinish:()=>null})},y=["Nombre Tablero","OT+Item","% avance","Tiempo estimado"],R=["Nombre_tablero","avance"],E=["Tiempo_estimado_cableado","Tiempo_estimado_cobre","Tiempo_estimado_corte","Tiempo_estimado_doblez","Tiempo_estimado_ensamble","Tiempo_estimado_pulida","Tiempo_estimado_soldadura","Tiempo_estimado_Ing_elec","Tiempo_estimado_Ing_mec"];return(o,t)=>(c(),n("section",K,[d(P,{show:i.show,onClose:t[11]||(t[11]=m=>h("close"))},{default:V(()=>{var m,b;return[r("form",{class:"px-6 my-8",onSubmit:t[10]||(t[10]=M((...s)=>o.create&&o.create(...s),["prevent"]))},[r("h2",Q,v(o.lang().label.add)+" "+v(i.title),1),r("div",W,[i.numberPermissions>1?(c(),n("div",X,[Y,d(a(u),{options:i.Trabajadores,label:"title",modelValue:a(e).user_id,"onUpdate:modelValue":t[0]||(t[0]=s=>a(e).user_id=s)},null,8,["options","modelValue"])])):p("",!0),r("div",Z,[ee,d(a(u),{options:T,label:"title",modelValue:l.tipoReporte,"onUpdate:modelValue":t[1]||(t[1]=s=>l.tipoReporte=s),disabled:""},null,8,["modelValue"])]),r("div",ae,[d(g,{for:"fecha",value:o.lang().label.fecha},null,8,["value"]),d(f,{id:"fecha",type:"date",class:"mt-1 block w-full bg-gray-200",modelValue:a(e).fecha,"onUpdate:modelValue":t[2]||(t[2]=s=>a(e).fecha=s),disabled:"",placeholder:"fecha",error:a(e).errors.fecha},null,8,["modelValue","error"]),d(_,{class:"mt-2",message:a(e).errors.fecha},null,8,["message"])]),r("div",oe,[d(g,{for:"hora_inicial",value:o.lang().label["hora inicial"]},null,8,["value"]),d(f,{id:"hora_inicial",type:"time",class:"mt-1 block w-full bg-gray-200",modelValue:a(e).hora_inicial,"onUpdate:modelValue":t[3]||(t[3]=s=>a(e).hora_inicial=s),disabled:"",placeholder:"hora_inicial",error:a(e).errors.hora_inicial,step:"3600"},null,8,["modelValue","error"]),d(_,{class:"mt-2",message:a(e).errors.hora_inicial},null,8,["message"])]),l.tipoReporte.value!=2?(c(),n("div",ie,[le,d(a(u),{options:l.ordentrabajo_ids,label:"title",modelValue:a(e).ordentrabajo_id,"onUpdate:modelValue":t[4]||(t[4]=s=>a(e).ordentrabajo_id=s)},null,8,["options","modelValue"]),d(_,{class:"mt-2",message:a(e).errors.ordentrabajo_id},null,8,["message"])])):p("",!0),a(e).ordentrabajo_id&&l.tipoReporte.value!=2?(c(),n("div",te,[d(g,{for:o.index,value:y[0]},null,8,["for","value"]),d(f,{id:o.index,type:"text",disabled:"",class:"mt-1 block w-full bg-gray-200",value:l.nombresOT[(m=i.generica)==null?void 0:m.ordentrabajo_id][R[0]]},null,8,["id","value"])])):p("",!0),a(e).ordentrabajo_id&&l.tipoReporte.value!=2?(c(),n("div",de,[d(g,{for:o.index,value:y[1]},null,8,["for","value"]),d(f,{id:o.index,type:"text",disabled:"",class:"mt-1 block w-full bg-gray-200",value:l.nombresOT[(b=i.generica)==null?void 0:b.ordentrabajo_id][R[1]]},null,8,["id","value"])])):p("",!0),r("div",se,[re,d(a(u),{options:l.centrotrabajo_id,label:"title",modelValue:a(e).centrotrabajo_id,"onUpdate:modelValue":t[5]||(t[5]=s=>a(e).centrotrabajo_id=s)},null,8,["options","modelValue"]),d(_,{class:"mt-2",message:a(e).errors.centrotrabajo_id},null,8,["message"])]),a(e).ordentrabajo_ids&&a(e).centrotrabajo_id&&l.tipoReporte.value!=2?(c(),n("div",ne,[d(g,{for:o.index,value:y[3]},null,8,["for","value"]),d(f,{id:o.index,type:"text",disabled:"",class:"mt-1 block w-full bg-gray-200",value:l.nombresOT[a(e).ordentrabajo_ids.value][E[a(e).centrotrabajo_id.value]]},null,8,["id","value"])])):p("",!0),l.tipoReporte.value==0||l.tipoReporte.value==1?(c(),n("div",ce,[pe,d(a(u),{options:l.actividad_id,label:"title",required:"",modelValue:a(e).actividad_id,"onUpdate:modelValue":t[6]||(t[6]=s=>a(e).actividad_id=s)},null,8,["options","modelValue"]),d(_,{class:"mt-2",message:a(e).errors.actividad_id},null,8,["message"])])):p("",!0),l.tipoReporte.value==1?(c(),n("div",_e,[ue,d(a(u),{options:l.reproceso_id,label:"title",required:"",modelValue:a(e).reproceso_id,"onUpdate:modelValue":t[7]||(t[7]=s=>a(e).reproceso_id=s)},null,8,["options","modelValue"]),d(_,{class:"mt-2",message:a(e).errors.reproceso_id},null,8,["message"])])):p("",!0),l.tipoReporte.value==2?(c(),n("div",me,[be,d(a(u),{options:l.disponibilidad_id,label:"title",required:"",modelValue:a(e).disponibilidad_id,"onUpdate:modelValue":t[8]||(t[8]=s=>a(e).disponibilidad_id=s)},null,8,["options","modelValue"]),d(_,{class:"mt-2",message:a(e).errors.disponibilidad_id},null,8,["message"])])):p("",!0)]),r("div",ve,[l.mensajeFalta!=""?(c(),n("h2",ge,v(l.mensajeFalta),1)):p("",!0),d(H,{disabled:a(e).processing,onClick:t[9]||(t[9]=s=>h("close"))},{default:V(()=>[U(v(o.lang().button.close),1)]),_:1},8,["disabled"]),d(J,{class:L(["ml-3",{"opacity-25":a(e).processing}]),disabled:a(e).processing,onClick:B},{default:V(()=>[U(v(a(e).processing?o.lang().button.save+"...":o.lang().button.save),1)]),_:1},8,["class","disabled"])])],32)]}),_:1},8,["show"])]))}};export{Ce as default};
