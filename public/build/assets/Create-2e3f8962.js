import{l as x,T as S,D as N,y as A,m as D,f as n,a as t,w as y,o as c,b as s,t as b,u as o,g as p,d as R,n as U,e as E}from"./app-074b46c7.js";import{_ as u}from"./InputError-56ccfaaa.js";import{_ as v,a as f}from"./TextInput-d448324e.js";import{_ as $,a as B}from"./SecondaryButton-a93e6dba.js";import{_ as z}from"./PrimaryButton-898ad35f.js";import{C as _}from"./vue-select-9fa78435.js";import"./vue-datepicker-f30b8365.js";/* empty css             */import{T as F,a as I}from"./global-c34cc242.js";const G={class:"space-y-6"},M=["onSubmit"],q={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},P={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6"},J={key:0,id:"opcinesActividadO",class:"xl:col-span-2"},X=s("label",{name:""}," Reportar en nombre de: ",-1),H={id:"opcinesActividadO",class:"xl:col-span-2"},K=s("label",{name:""}," Tipo de reporte ",-1),L={class:"xl:col-span-1"},Q={class:""},W={key:1,id:"Sordentrabajo"},Y=s("label",{name:"ordentrabajo_ids"}," Orden de trabajo ",-1),Z={key:2,class:"w-full col-span-2"},ee={key:3,class:"w-full col-span-1"},oe={id:"Scentrotrabajo"},ae=s("label",{name:"centrotrabajo_id"}," Centro de trabajo ",-1),ie={key:4},le={key:5,id:"actividad",class:"col-span-2"},te=s("label",{name:"actividad_id"}," Actividad ",-1),de={key:6,id:"reproceso",class:"col-span-2"},se=s("label",{name:"reproceso_id"}," Reproceso",-1),re={key:7,id:"disponibilidad",class:"col-span-3"},ne=s("label",{name:"disponibilidad_id"}," Disponibilidad",-1),ce={class:"mb-8 mt-[230px] flex justify-end"},pe={key:0,class:"mx-12 px-8 text-lg font-medium text-red-700 bg-red-50 dark:text-gray-100"},Ve={__name:"Create",props:{show:Boolean,title:String,roles:Object,losSelect:Object,numberPermissions:Number,valuesGoogleCabeza:Object,valuesGoogleBody:Object,Trabajadores:Object},emits:["close"],setup(k,{emit:j}){const r=k,l=x({params:{pregunta:""},tipoReporte:{title:"Actividad",value:0},actividad_id:r.losSelect.actividad,centrotrabajo_id:r.losSelect.centrotrabajo,disponibilidad_id:r.losSelect.disponibilidad,ordentrabajo_id:r.losSelect.ordentrabajo,reproceso_id:r.losSelect.reproceso,temp_disponibilidad_id:null,temp_reproceso_id:null,temp_actividad_id:null,valorInactivo:"NA",cabeza:r.valuesGoogleCabeza,nombresOT:Object.values(r.valuesGoogleBody),ordentrabajo_ids:[],mensajeFalta:""}),e=S({...Object.fromEntries(["tipoReporte","fecha","hora_inicial","hora_final","actividad_id","centrotrabajo_id","disponibilidad_id","operario_id","ordentrabajo_id","reproceso_id","ordentrabajo_ids","otitem","tiempoEstimado","user_id"].map(d=>[d,""]))});N(()=>{r.numberPermissions>8}),A(()=>{if(r.show){e.errors={};let d=new Date;(e.fecha===null||e.fecha==="")&&(e.fecha=F(d).substring(0,10),e.hora_inicial=I()),l.ordentrabajo_ids=l.nombresOT.map((a,i)=>{var m;return{title:(m=a.Item)==null?void 0:m.replace(/_/g," "),value:i}})}}),e.fecha,e.hora_inicial,e.ordentrabajo_id,e.centrotrabajo_id,e.actividad_id,e.disponibilidad_id,e.reproceso_id;let g=d=>{let a="";try{d.forEach((i,m)=>{if(typeof e[i]>"u"||e[i]===null||e[i].length===0)throw a=i,console.log("ðŸ§ˆ debu value:",i),new Error("BreakException")})}catch{}return a},w=()=>{let d=l.tipoReporte.value,a=!0;const i=" es obligatorio";d==0&&(a=g(["ordentrabajo_ids","centrotrabajo_id","actividad_id"])),d==1&&(a=g(["centrotrabajo_id","ordentrabajo_ids","actividad_id","reproceso_id"])),d==2&&(a=g(["centrotrabajo_id","disponibilidad_id"]));let m={ordentrabajo_ids:"Orden trabajo",actividad_id:"Actividad",reproceso_id:"Reproceso",centrotrabajo_id:"Centro de trabajo",disponibilidad_id:"Disponibilidad"};return a!=""?m[a]+i:a};const V=()=>{e.ordentrabajo_id=e.ordentrabajo_ids,e.tipoReporte=l.tipoReporte,l.mensajeFalta=w(),l.mensajeFalta==""&&e.post(route("reporte.store"),{preserveScroll:!0,onSuccess:()=>{j("close"),e.reset()},onError:()=>alert(JSON.stringify(e.errors,null,4)),onFinish:()=>null})};D(()=>l.tipoReporte,d=>{e.reset()});const O=[{title:"Actividad",value:0},{title:"Reproceso",value:1},{title:"Disponibilidad(paro)",value:2}],h=["Nombre Tablero","OT+Item","% avance","Tiempo estimado"],T=["Nombre_tablero","avance"],C=["Tiempo_estimado_cableado","Tiempo_estimado_cobre","Tiempo_estimado_corte","Tiempo_estimado_doblez","Tiempo_estimado_ensamble","Tiempo_estimado_pulida","Tiempo_estimado_soldadura","Tiempo_estimado_Ing_elec","Tiempo_estimado_Ing_mec"];return(d,a)=>(c(),n("section",G,[t($,{show:r.show,onClose:a[10]||(a[10]=i=>j("close"))},{default:y(()=>[s("form",{class:"px-6 my-8",onSubmit:E(V,["prevent"])},[s("h2",q,b(d.lang().label.add)+" "+b(r.title),1),s("div",P,[r.numberPermissions>8?(c(),n("div",J,[X,t(o(_),{options:r.Trabajadores,label:"title",modelValue:o(e).user_id,"onUpdate:modelValue":a[0]||(a[0]=i=>o(e).user_id=i)},null,8,["options","modelValue"])])):p("",!0),s("div",H,[K,t(o(_),{options:O,label:"title",modelValue:l.tipoReporte,"onUpdate:modelValue":a[1]||(a[1]=i=>l.tipoReporte=i)},null,8,["modelValue"])]),s("div",L,[t(v,{for:"fecha",value:d.lang().label.fecha},null,8,["value"]),t(f,{id:"fecha",type:"date",class:"mt-1 block w-full bg-gray-200",modelValue:o(e).fecha,"onUpdate:modelValue":a[2]||(a[2]=i=>o(e).fecha=i),disabled:"",placeholder:"fecha",error:o(e).errors.fecha},null,8,["modelValue","error"]),t(u,{class:"mt-2",message:o(e).errors.fecha},null,8,["message"])]),s("div",Q,[t(v,{for:"hora_inicial",value:d.lang().label["hora inicial"]},null,8,["value"]),t(f,{id:"hora_inicial",type:"time",class:"mt-1 block w-full bg-gray-200",modelValue:o(e).hora_inicial,"onUpdate:modelValue":a[3]||(a[3]=i=>o(e).hora_inicial=i),disabled:"",placeholder:"hora_inicial",error:o(e).errors.hora_inicial,step:"3600"},null,8,["modelValue","error"]),t(u,{class:"mt-2",message:o(e).errors.hora_inicial},null,8,["message"])]),l.tipoReporte.value!=2?(c(),n("div",W,[Y,t(o(_),{options:l.ordentrabajo_ids,label:"title",modelValue:o(e).ordentrabajo_ids,"onUpdate:modelValue":a[4]||(a[4]=i=>o(e).ordentrabajo_ids=i)},null,8,["options","modelValue"]),t(u,{class:"mt-2",message:o(e).errors.ordentrabajo_id},null,8,["message"])])):p("",!0),o(e).ordentrabajo_ids&&l.tipoReporte.value!=2?(c(),n("div",Z,[t(v,{for:d.index,value:h[0]},null,8,["for","value"]),t(f,{id:d.index,type:"text",disabled:"",class:"mt-1 block w-full bg-gray-200",value:l.nombresOT[o(e).ordentrabajo_ids.value][T[0]]},null,8,["id","value"])])):p("",!0),o(e).ordentrabajo_ids&&l.tipoReporte.value!=2?(c(),n("div",ee,[t(v,{for:d.index,value:h[1]},null,8,["for","value"]),t(f,{id:d.index,type:"text",disabled:"",class:"mt-1 block w-full bg-gray-200",value:l.nombresOT[o(e).ordentrabajo_ids.value][T[1]]},null,8,["id","value"])])):p("",!0),s("div",oe,[ae,t(o(_),{options:l.centrotrabajo_id,label:"title",modelValue:o(e).centrotrabajo_id,"onUpdate:modelValue":a[5]||(a[5]=i=>o(e).centrotrabajo_id=i)},null,8,["options","modelValue"]),t(u,{class:"mt-2",message:o(e).errors.centrotrabajo_id},null,8,["message"])]),o(e).ordentrabajo_ids&&o(e).centrotrabajo_id&&l.tipoReporte.value!=2?(c(),n("div",ie,[t(v,{for:d.index,value:h[3]},null,8,["for","value"]),t(f,{id:d.index,type:"text",disabled:"",class:"mt-1 block w-full bg-gray-200",value:l.nombresOT[o(e).ordentrabajo_ids.value][C[o(e).centrotrabajo_id.value]]},null,8,["id","value"])])):p("",!0),l.tipoReporte.value==0||l.tipoReporte.value==1?(c(),n("div",le,[te,t(o(_),{options:l.actividad_id,label:"title",required:"",modelValue:o(e).actividad_id,"onUpdate:modelValue":a[6]||(a[6]=i=>o(e).actividad_id=i)},null,8,["options","modelValue"]),t(u,{class:"mt-2",message:o(e).errors.actividad_id},null,8,["message"])])):p("",!0),l.tipoReporte.value==1?(c(),n("div",de,[se,t(o(_),{options:l.reproceso_id,label:"title",required:"",modelValue:o(e).reproceso_id,"onUpdate:modelValue":a[7]||(a[7]=i=>o(e).reproceso_id=i)},null,8,["options","modelValue"]),t(u,{class:"mt-2",message:o(e).errors.reproceso_id},null,8,["message"])])):p("",!0),l.tipoReporte.value==2?(c(),n("div",re,[ne,t(o(_),{options:l.disponibilidad_id,label:"title",required:"",modelValue:o(e).disponibilidad_id,"onUpdate:modelValue":a[8]||(a[8]=i=>o(e).disponibilidad_id=i)},null,8,["options","modelValue"]),t(u,{class:"mt-2",message:o(e).errors.disponibilidad_id},null,8,["message"])])):p("",!0)]),s("div",ce,[l.mensajeFalta!=""?(c(),n("h2",pe,b(l.mensajeFalta),1)):p("",!0),t(B,{disabled:o(e).processing,onClick:a[9]||(a[9]=i=>j("close"))},{default:y(()=>[R(b(d.lang().button.close),1)]),_:1},8,["disabled"]),t(z,{class:U(["ml-3",{"opacity-25":o(e).processing}]),disabled:o(e).processing,onClick:V},{default:y(()=>[R(b(o(e).processing?d.lang().button.add+"...":d.lang().button.add),1)]),_:1},8,["class","disabled"])])],40,M)]),_:1},8,["show"])]))}};export{Ve as default};
